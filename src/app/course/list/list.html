<section class="sm-padding">
  <div class="container">
    <div class="row mb-5">
      <div class="col-md-12 col-lg-12 col-sm-12 text-center">
        <h2 class="color-light-black">
          <span translate>Learn on your schedule...</span><br />
          <span translate>Anytime. Anywhere.</span>
        </h2>
        <p class="content-title mt-3">
          <span translate>Study any webinar, anytime. Explore thousands of courses. </span>
          <br /><span translate>Transform your life through education. </span>
        </p>
      </div>
    </div>
    <div class="row mb-3" [ngClass]="{'text-left': !rtl, 'text-right': rtl}">
      <div class="col-md-12 d-flex justify-content-between mt-n2 rmt-4 rd-block">
        <div class="form-group mr-3 rmr-0">
          <label class="font-weight-bold font-sm" translate>Grades</label>
          <select class="custom-select" [(ngModel)]="searchFields.gradeIds" (change)="gradeChange($event)">
            <option class="subject" selected value="" translate>None</option>
            <option class="subject" *ngFor="let item of grades" ngValue="{{ item._id }}" translate>
              {{ item.name }}
            </option>
          </select>
        </div>
        <div class="form-group mr-3 rmr-0">
          <label class="font-weight-bold font-sm" translate>Categories</label>
          <select class="custom-select" [(ngModel)]="searchFields.categoryIds" (change)="selectCategory()">
            <option selected translate value="">None</option>
            <option *ngFor="let cate of categories" value="{{cate._id}}" translate>{{cate.name}}</option>
          </select>
        </div>
        <div class="form-group mr-3 rmr-0">
          <label class="font-weight-bold font-sm" translate>Subjects</label>
          <select class="custom-select" [(ngModel)]="searchFields.subjectIds" (change)="selectSubject()">
            <option selected translate value="">None</option>
            <option *ngFor="let sub of subjects" value="{{sub._id}}" translate>{{sub.name}}</option>
          </select>
        </div>
        <div class="form-group mr-3 rmr-0">
          <label class="font-weight-bold font-sm" translate>Topics</label>
          <select class="custom-select" [(ngModel)]="searchFields.topicIds" (change)="query()">
            <option selected translate value="">None</option>
            <option *ngFor="let topic of topics" value="{{topic._id}}" translate>{{topic.name}}</option>
          </select>
        </div>
        <div class="form-group mr-3 rmr-0 custom-ng-select">
          <label class="font-weight-bold font-sm" translate>Filter By Age</label>
          <ng-select
            [items]="ageFilter"
            [hideSelected]="true"
            bindLabel="name"
            [closeOnSelect]="true"
            name="age"
            placeholder="{{'Choose age' | translate}}"
            required
            (change)="filterByAge($event)"
          >
            <ng-template ng-label-tmp let-item="item">
              <span class="ng-value-label">{{ item.from + ' - ' + item.to }}</span>
            </ng-template>
            <ng-template ng-option-tmp let-item="item" let-search="searchTerm" let-index="index">
              <span>{{ item.from + ' - ' + (item.to < 100 ? item.to : 'above' ) }}</span>
            </ng-template>
          </ng-select>
        </div>
        <!-- <div class="form-group mr-3 rmr-0">
          <label class="font-weight-bold font-sm" translate>Date</label>
          <date-range (dateChange)="dateChangeEvent($event)"></date-range>
        </div> -->
        <div class="form-group mr-3 rmr-0">
          <label class="font-weight-bold font-sm" translate>Price</label>
          <select class="custom-select" [(ngModel)]="sortOption.sortType" (change)="sortPrice($event)">
            <option selected translate value="">None</option>
            <option value="asc" translate>Low to High</option>
            <option value="desc" translate>High to Low</option>
          </select>
        </div>
      </div>
      <div class="col-md-12">
        <div class="input-group shadow-sm input-shadow br-3">
          <div class="input-group-prepend border-none">
            <span class="input-group-text">
              <i class="fas fa-search color-light-red"></i>
            </span>
          </div>
          <input
            type="text"
            class="form-control border-none"
            placeholder="{{'Search here..'| translate}}"
            (keyup)="doSearch($event)"
          />
        </div>
      </div>
    </div>
    <div class="row text-left" [ngClass]="{'text-left': !rtl, 'text-right': rtl}">
      <div class="col-md-12" [hidden]="itemChunks.length || loading">
        <p translate>No results</p>
      </div>
      <div class="col-md-12 text-left" [hidden]="!loading">
        <p><span translate>Loading</span>...</p>
      </div>
    </div>
    <div
      class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3"
      *ngIf="itemChunks.length && itemChunks[0].length && !loading"
    >
      <app-card-course class="col mb-4" *ngFor="let item of itemChunks[0]" [course]="item"></app-card-course>
    </div>
  </div>
  <section class="sm-padding bg-color-light" *ngIf="item1">
    <div class="container">
      <div class="row">
        <div class="col-md-12 col-12 col-lg-12">
          <div class="card-horizontal">
            <div class="row">
              <div class="col-md-6" [ngClass]="{'text-left': !rtl, 'text-right': rtl}">
                <h5 class="card-title">{{item1?.name}}</h5>
                <div class="card-text" *ngIf="item1?.description">
                  <p class="card-text more1" [innerHTML]="item1?.description"></p>
                  <a [routerLink]="['/courses/detail',item1?.alias]" class="morelink"
                    ><span translate>Read more</span>...</a
                  >
                </div>
                <div class="row row-cols-2">
                  <div class="col-md-6">
                    <div class="profile">
                      <a [routerLink]="['/tutors', item1?.tutor?.username]" class="hyperlink">
                        <img
                          src="{{item1?.tutor?.avatarUrl}}"
                          class="cate-profile box-shadow-lg"
                          [ngClass]="{'float-left': !rtl, 'float-right': rtl}"
                          alt=""
                          onerror="this.src='/assets/images/no-image.jpg'"
                        />
                        <h5 class="cate-profile-name pt-sm pt-4 text-left">{{item1?.tutor?.name || 'بدون اسم'}}</h5>
                      </a>
                    </div>
                    <div class="rating-stars rating-pt">
                      <ul id="stars">
                        <star-rating [rate]="item1?.tutor?.ratingAvg"></star-rating>
                        <span>{{item1?.tutor?.ratingAvg}} ({{item1?.tutor?.totalRating}})</span>
                      </ul>
                    </div>
                  </div>
                  <div class="col-md-6 text-right mt-4" *ngIf="item1.categories.length>1">
                    <a
                      class="badge badge-default mt-2"
                      placement="bottom"
                      title="{{getCategories(item1)}}"
                      (click)="clickCategory(item1.categories[0]._id)"
                      >{{item1.categories[0].name | ellipsis:14}}</a
                    >
                  </div>
                </div>
                <div class="row mt-4 row-cols-2 rmb-4">
                  <div class="col-md-6">
                    <a
                      *ngIf="!item1?.booked"
                      class="btn btn-green"
                      [routerLink]="['/courses/detail',item1?.alias]"
                      translate
                      >Buy Now</a
                    >
                    <a
                      *ngIf="item1?.booked"
                      class="btn btn-purchased"
                      [routerLink]="['/courses/detail',item1?.alias]"
                      translate
                      >Purchased</a
                    >
                  </div>
                  <div class="col-md-6 text-right">
                    <h5 class="color-light-red mt-2">
                      <strong *ngIf="!item1.price || item1.isFree || item1.price === 0" translate>Free</strong>
                      <strong *ngIf="item1.price && item1.price > 0 && config?.currencySymbol !=='DZD'"
                        >{{ item1?.price | currency : (config?.currencySymbol ? config?.currencySymbol + ' ' : '$ '):
                        'symbol' : '1.0'}}</strong
                      >
                      <strong *ngIf="item1.price && item1.price > 0 && config?.currencySymbol ==='DZD'"
                        translate>{{ item1.price | currency :'DA ' : 'symbol' : '1.0'}} ({{ item1.price / 100 | currency :'$ ' : 'symbol' : '1.0'}})</strong
                      >
                    </h5>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="img-square-wrapper">
                  <img
                    src="{{item1?.mainImage?.fileUrl}}"
                    alt=""
                    class="border-radius-default object-fit-cover h-400"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <section class="sm-padding">
    <div class="container">
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-2 row-cols-lg-3" *ngIf="itemChunks.length >= 2">
        <app-card-course class="col-md-4 mb-4" *ngFor="let item of itemChunks[1]" [course]="item"></app-card-course>
      </div>
      <div class="row mt-5" *ngIf="totalCourses>pageSize">
        <div class="col-md-12 text-center">
          <ngb-pagination
            [collectionSize]="totalCourses"
            [(page)]="currentPage"
            [pageSize]="pageSize"
            [maxSize]="5"
            (pageChange)="query()"
            class="card-pagination pagination"
          ></ngb-pagination>
        </div>
      </div>
    </div>
  </section>
</section>
